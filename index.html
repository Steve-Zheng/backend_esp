<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Websocket</title>
</head>
<body>
    <input style="width: 800px;height: 200px" type="text" placeholder="enter text here to send to server" id="textField"
       onkeypress="myFunction(event)"/>
    <button onclick="clearLog()">Clear Logs</button>
    <div style="overflow:scroll; width: 800px; height: 550px; border: solid; border-radius: 9px" id="display"></div>
<script>
    const sock = new WebSocket("ws://localhost:3000");
    const display = document.getElementById("display");

    sock.onopen = function (event) {
        setTimeout(function () {
            sock.send('connection succeeded');
        }, 1000);
        display.innerHTML += "connection succeeded <br>";
    };
    sock.onmessage = function (event) {
        console.log(event);
        display.innerHTML += event.data + "<br>";
    }

    async function myFunction(event) {
        if (event.keyCode === 13) {
            let text = document.getElementById('textField').value;
            if (text !== "") {
                await sock.send(text);
                display.innerHTML += "<strong>Me: </strong>" + text + "<br>";
                document.getElementById('textField').value = "";
            } else {
                console.log("empty string not sent")
            }
        }
    }

    function clearLog() {
        display.innerHTML = "";
    }
</script>
</body>
</html>